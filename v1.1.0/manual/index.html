<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Introduction · TypeClasses.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://JuliaFunctional.github.io/TypeClasses.jl/manual/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">TypeClasses.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Manual</span><ul><li class="is-active"><a class="tocitem" href>Introduction</a><ul class="internal"><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#More-Details"><span>More Details</span></a></li><li><a class="tocitem" href="#General-Design-Decisions"><span>General Design Decisions</span></a></li></ul></li><li><a class="tocitem" href="../manual-TypeClasses/">TypeClasses</a></li><li><a class="tocitem" href="../manual-DataTypes/">DataTypes</a></li></ul></li><li><a class="tocitem" href="../library/">Library</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Introduction</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Introduction</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaFunctional/TypeClasses.jl/blob/master/docs/src/manual.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h1><p>Welcome to <code>TypeClasses.jl</code>. TypeClasses defines general programmatic abstractions taken from Scala cats and Haskell TypeClasses.</p><p>We use &quot;interface&quot; and &quot;typeclass&quot; synonymously. The following interfaces are defined:</p><table><tr><th style="text-align: right">TypeClass</th><th style="text-align: right">Methods</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right"><a href="../manual-TypeClasses/#functor_applicative_monad">Functor </a></td><td style="text-align: right"><code>Base.map</code></td><td style="text-align: right">The basic definition of a container or computational context.</td></tr><tr><td style="text-align: right"><a href="../manual-TypeClasses/#functor_applicative_monad">Applicative</a></td><td style="text-align: right">Functor &amp; <code>TypeClasses.pure</code> &amp; <code>TypeClasses.ap</code> (automatically defined when <code>map</code> and <code>flatmap</code> are defined)</td><td style="text-align: right">Computational context with support for parallel execution.</td></tr><tr><td style="text-align: right"><a href="../manual-TypeClasses/#functor_applicative_monad">Monad</a></td><td style="text-align: right">Applicative &amp; <code>TypeClasses.flatmap</code></td><td style="text-align: right">Computational context with support for sequential, nested execution.</td></tr><tr><td style="text-align: right"><a href="../manual-TypeClasses/#semigroup_monoid_alternative">Semigroup</a></td><td style="text-align: right"><code>TypeClasses.combine</code>, alias <code>⊕</code></td><td style="text-align: right">The notion of something which can be combined with other things of its kind.</td></tr><tr><td style="text-align: right"><a href="../manual-TypeClasses/#semigroup_monoid_alternative">Monoid</a></td><td style="text-align: right">Semigroup &amp; <code>TypeClasses.neutral</code></td><td style="text-align: right">A semigroup with a neutral element is called a Monoid, an often used category.</td></tr><tr><td style="text-align: right"><a href="../manual-TypeClasses/#semigroup_monoid_alternative">Alternative</a></td><td style="text-align: right"><code>TypeClasses.neutral</code> &amp; <code>TypeClasses.orelse</code>, alias <code>⊘</code></td><td style="text-align: right">Slightly different than Monoid, the <code>orelse</code> semantic does not merge two values, but just takes one of the two.</td></tr><tr><td style="text-align: right"><a href="../manual-TypeClasses/#flip_types">FlipTypes</a></td><td style="text-align: right"><code>TypeClasses.flip_types</code></td><td style="text-align: right">Enables dealing with nested types. Transforms an <code>A{B{C}}</code> into an <code>B{A{C}}</code>.</td></tr></table><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><pre><code class="language-julia hljs">using Pkg
Pkg.add(&quot;TypeClasses&quot;)</code></pre><p>Use it like</p><pre><code class="language-julia hljs">using TypeClasses</code></pre><h2 id="More-Details"><a class="docs-heading-anchor" href="#More-Details">More Details</a><a id="More-Details-1"></a><a class="docs-heading-anchor-permalink" href="#More-Details" title="Permalink"></a></h2><p>For detailed information of the TypeClasses, see <a href="../manual-TypeClasses/#TypeClasses">TypeClasses</a>.</p><p>For detailed information about implementations of the TypeClasses for concrete DataTypes, see <a href="../manual-DataTypes/#DataTypes">DataTypes</a>.</p><h2 id="General-Design-Decisions"><a class="docs-heading-anchor" href="#General-Design-Decisions">General Design Decisions</a><a id="General-Design-Decisions-1"></a><a class="docs-heading-anchor-permalink" href="#General-Design-Decisions" title="Permalink"></a></h2><ul><li>reuse as much <code>Base</code> as possible</li><li>make it stable (hence so far we only support the most important type-classes)</li><li>make it simple</li><li>make it convenient</li><li>bring examples</li></ul><h3 id="No-dispatch-on-eltype"><a class="docs-heading-anchor" href="#No-dispatch-on-eltype">No dispatch on <code>eltype</code></a><a id="No-dispatch-on-eltype-1"></a><a class="docs-heading-anchor-permalink" href="#No-dispatch-on-eltype" title="Permalink"></a></h3><p>With Functors and the like a typical thing you want to do is to get to know more about the inner type, i.e. the <code>eltype</code>. It turns out this is unwanted.</p><p>Julia&#39;s type-inference is seriously incomplete and there is also no sign that this will ever change. The compiler tries very hard to always infer the maximal specific type, but may fallback to more generic types if unsure or because of time-constraints. A calculation which may build up a <code>Vector{Number}</code> may easily turn out as a <code>Vector{Any}</code>, and even for a method returning <code>Vector{String}</code>, the underlying code may be that dynamic in nature, that the compiler just cannot infer the type and will return <code>Vector{Any}</code>. The take home message here is that, practically, <code>eltype</code> is an instable function. It&#39;s concrete behaviour, somewhere within a nested stack of function calls, may change between versions, depending on changing undocumented compiler-heuristics, or may even change because another layer of abstractions is added somewhere within the nested calls, which again triggers different compiler-heuristics.</p><p>If you dispatch on <code>Vector{Number}</code> in order to implement something specific for Number, that may fail to catch the Vector{Number} which was interpreted as <code>Vector{Any}</code> because of approximate type inference. You need to make sure that the semantics of the method for <code>Vector{Any}</code> is actually identical to the specialised version <code>Vector{Number}</code>. You should only ever do performance optimisations when dispatching on <code>eltype</code>, never base your semantics on <code>eltype</code>.</p><p>With Functors, specifically with Monads, we have exactly the setting where we may dispatch on <code>eltype</code> to define different semantics. They key reason is that there are a couple of Monads where you cannot inspect the concrete elements, for instance <code>Callable</code> where the element is hidden behind an arbitrary function. Hence you may not be able to implement a function for <code>Callable{Any}</code> in a sensible way, while it actually is well-defined for <code>Callable{Callable}</code>. That is not Julia.</p><p>Another example is the typeclass <code>neutral</code>. It turns out you can define <code>neutral</code> for each <code>Applicative</code> which ElementType itself implements <code>neutral</code>. It is really tempting to define the generic implementation for Applicatives, dispatching on <code>eltype</code>... Instead we provide specific applicative versions <code>neutral_applicative</code> and <code>combine_applicative</code> which assume the elements comply to the <code>Neutral</code> and <code>Semigroup</code> interface respectively. Similar for <code>orelse</code>.</p><p>As we cannot safely dispatch on <code>eltype</code>, the Julia way is to just assume your ElementType has the characteristics needed for your function, i.e. use duck-typing instead of dispatch. Naturally, this will work for all containers with the right elements. And in case the elements do not implement the required interfaces, it will fail with a well self-explaining <code>MethodError</code>. This you can then debug which will bring you directly to the place where you can inspect the elements in detail.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../manual-TypeClasses/">TypeClasses »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.4 on <span class="colophon-date" title="Saturday 24 July 2021 22:25">Saturday 24 July 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
